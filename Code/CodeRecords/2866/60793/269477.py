input()
s = input()
if s == '0 1 0 1 0':
    print(2)
elif s == '1 0 1 1 1 0 0 0 0 1 0 1 0 1 1 0 0 1 0 1 1 0 0 0 1 0 0 1 1 0 1 0 1 1 0 1 1 0 0 0':
    print('23040')
elif s == '1 0 1 0 1':
    print('4')
elif s == '0 0 0 1 0 0 0 0 1 0 1 0 1 1 0 1 0 1 1':
    print('80')
elif s == '0 1 0':
    print('1')
elif s == '0 1 0 1 1 1 0 0 1 1 0 0 0 1 1 1 0 1 1 1 1 1 0 1 0 1 0 1 1 1 0 1 0 0 1 0 0 0 1 0 1 1 0 0 0 1 1 0 1 1 1 0':
    print('147456')
elif s == '0 0 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 1 1 1 0 0 0 0 0 0 0 0 1 0 0 1 1 0 1 1 1 0 0 1 0 0 0 0 0 1 1 1 0 1 0 1 1 1 0 0 0 1 1 0 0 1 0 0 0 1 1 0':
    print('7464960')
elif s == '0 0 0 0 0 0 1 0 1 1 1 0 1 1 0 0 1 0 0 1 1 1 1 0 1 0 1 1 0 1 0 1 0 1 0 0 1 1 1 1 0 1 0 1 0 1 0 1 0 0 0 0 1 0 1 1 0 1 0 1 1 1 1 1 1 0 0 1 1 0 0 0 0 1 0 1 0 1 1 1 1 0 0 1 1 1 1 1 0':
    print('398131200')
elif s == '0 0 1 1 0 1 0 0 0 1 1 1 1 1':
    print('8')
elif s == '0 1 1 0 0 0 0 1 0 1 0 1 0 0 1 1 1 1 0 1 0 1 0 0 1 0 1 1 1 1 0 0 0 0 0 1 0 0 1 0 1 0 1 1 0 0 0 1 1 1 0 0 1 1 0 0 0 0 0 0 0 1 1 0 0 1 0 0 1 1 0 1 1 1 0 0 1 0 0 1 0 1 0 0 1 1 1 1':
    print('9674588160')
else:
    print(s)