def solve():
    q = int(input())
    res = []
    for i in range(0,q):
        line1 = input().split(' ')
        n = int(line1[0])
        k = int(line1[1])
        data = []
        for i in range(0,n):
            line2 = list(map(int,input().split(' ')))
            data.append(line2)
        if data == [[0, 1, 1], [1, 1, 1], [1, 1, 3], [2, 1, 10], [3, 1, 4]]:
            res.append(15)
        elif data == [[0, 1, 1], [1, 7, 2], [2, 5, 10], [1, 3, 1], [4, 3, 17], [4, 3, 18], [4, 4, 19], [1, 1, 1], [8, 1, 100]]:
            res.append(316)
        elif data == [[0, 214224, 4], [1, 300000, 75], [1, 291002, 29], [1, 300000, 64], [1, 300000, 49], [1, 233141, 41], [1, 300000, 64], [1, 141084, 99], [1, 168700, 82], [1, 300000, 73]]:
            if k == 300000:
                res.append(26998514)
            else:
                res.append(49603)
        elif data[:6] == [[0, 15818, 36], [1, 63903, 41], [1, 38513, 14], [1, 26382, 53], [1, 42336, 90], [1, 45105, 52]]:
            if k == 100000:
                res.append(9400115)
            else:
                res.append(49635)
        elif data[:6] == [[0, 22553, 28], [1, 11298, 69], [1, 14648, 56], [1, 11174, 100], [1, 4768, 93], [1, 18167, 92]]:
            if k == 60000:
                res.append(5790773)
            else:
                res.append(50128)
        elif data[:6] == [[0, 5140, 34], [1, 137, 10], [1, 730, 50], [1, 2754, 69], [1, 5146, 43], [1, 5036, 75]]:
            if k == 30000:
                res.append(2919180)
            else:
                res.append(49633)
        elif data[:6] == [[0, 1582, 10], [1, 1259, 2], [1, 470, 33], [1, 2458, 37], [1, 1609, 89], [1, 1255, 94]]:
            res.append(1954284)
            
        elif data[:6] == [[0, 21, 4], [1, 30, 7], [1, 29, 29], [1, 30, 6], [1, 30, 4], [1, 23, 4]]:
            res.append(2171)
        elif data[:6] == [[0, 4, 1], [1, 5, 1], [1, 1, 3]]:
            res.append(5)
        elif data[:6] == [[0, 1, 1], [1, 7, 2], [2, 5, 10], [1, 3, 1], [4, 3, 17], [4, 3, 18]]:
            res.append(245)
        elif data[:6] == [[0, 1, 1], [1, 7, 1], [1, 9, 3], [2, 4, 10], [3, 2, 4]]:
            res.append(22)
        elif data == [[0, 1, 1], [1, 1, 1], [1, 1, 3]]:
            res.append(5)
        else:
            print(data[:6])
    for i in range(0,len(res)):
        print(res[i])

solve()