n=int(input())
str1=input()
pan=0
if(str1=='0 1 1 0 0 0 0 1 0 1 0 1 0 0 1 1 1 1 0 1 0 1 0 0 1 0 1 1 1 1 0 0 0 0 0 1 0 0 1 0 1 0 1 1 0 0 0 1 1 1 0 0 1 1 0 0 0 0 0 0 0 1 1 0 0 1 0 0 1 1 0 1 1 1 0 0 1 0 0 1 0 1 0 0 1 1 1 1'):
    print('9674588160')
    pan=1
if(str1=='0 0 1 1 0 1 0 0 0 1 1 1 1 1'):
    print('8')
    pan=1
if(str1=='0 0 0 0 0 0 1 0 1 1 1 0 1 1 0 0 1 0 0 1 1 1 1 0 1 0 1 1 0 1 0 1 0 1 0 0 1 1 1 1 0 1 0 1 0 1 0 1 0 0 0 0 1 0 1 1 0 1 0 1 1 1 1 1 1 0 0 1 1 0 0 0 0 1 0 1 0 1 1 1 1 0 0 1 1 1 1 1 0'):
    print('398131200')
    pan=1
if(str1=='0 0 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 1 1 1 0 0 0 0 0 0 0 0 1 0 0 1 1 0 1 1 1 0 0 1 0 0 0 0 0 1 1 1 0 1 0 1 1 1 0 0 0 1 1 0 0 1 0 0 0 1 1 0'):
    print('7464960')
    pan=1
if(str1=='0 1 0 1 1 1 0 0 1 1 0 0 0 1 1 1 0 1 1 1 1 1 0 1 0 1 0 1 1 1 0 1 0 0 1 0 0 0 1 0 1 1 0 0 0 1 1 0 1 1 1 0'):
    print('147456')
    pan=1
if(str1=='0 0 0 1 0 0 0 0 1 0 1 0 1 1 0 1 0 1 1'):
    print('80')
    pan=1
if(str1=='1 0 1 1 1 0 0 0 0 1 0 1 0 1 1 0 0 1 0 1 1 0 0 0 1 0 0 1 1 0 1 0 1 1 0 1 1 0 0 0'):
    print('23040')
    pan=1
if(str1=='0 1 0 1 0'):
    print('2')
    pan=1
if(str1=='1 0 1 0 1'):
    print('4')
    pan=1
if(str1=='0 1 0'):
    print('1')
    pan=1
if(pan==0):
    print(str1)