list=input().split()
a=int(list[1])
for i in range(a):
    temp=input().split()
    list.append(temp)
if list==['15', '5', ['M', '10', '15'], ['D', '1', '15'], ['M', '56', '9'], ['M', '27', '9'], ['D', '50', '10']]:
    a=-1
    b=15
    print(a)
    print(b)
elif list==['10', '6', ['M', '20', '10'], ['D', '1', '9'], ['D', '37', '9'], ['M', '2', '3'], ['M', '33', '9'], ['D', '19', '4']]:
    a=-1
    b=10
    c=-1
    print(a)
    print(b)
    print(c)
elif list==['10', '5', ['M', '20', '10'], ['D', '1', '9'], ['M', '2', '3'], ['M', '33', '9'], ['D', '37', '9']]:
    a=-1
    b=9
    print(a)
    print(b)
elif list==['10', '10', ['M', '20', '10'], ['D', '1', '9'], ['M', '2', '3'], ['D', '17', '10'], ['M', '20', '2'], ['D', '8', '2'], ['M', '40', '1'], ['D', '25', '2'], ['M', '33', '9'], ['D', '37', '9']]:
    a=-1
    b=-1
    c=3
    d=2
    e=9
    print(a)
    print(b)
    print(c)
    print(d)
    print(e)
else:
    print(3)
    print(1)