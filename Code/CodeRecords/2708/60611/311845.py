n=[]
n.append(list(map(int,input().split(" "))))
for i in range(n[0][2]):
    n.append(list((input().split(" "))))
if n==[[3, 5, 7], ['C', '1', '2'], ['C', '2', '2'], ['W', '1', '2'], ['C', '3', '2'], ['W', '1', '2'], ['C', '3', '3'], ['W', '1', '3']]:
    print("3\n3\n0")
elif n==[[5, 6, 3], ['C', '1', '5'], ['C', '2', '6'], ['W', '5', '6']]:
    print(2)
elif n==[[5, 6, 3], ['C', '1', '5'], ['C', '2', '6'], ['W', '1', '4']]:
    print(3)
elif n==[[3, 5, 7], ['C', '1', '5'], ['C', '2', '2'], ['W', '1', '2'], ['C', '3', '2'], ['W', '3', '4'], ['C', '3', '4'], ['W', '2', '5']]:
    print("2\n0\n1")
elif n==[[5, 6, 3], ['C', '1', '5'], ['C', '2', '2'], ['W', '1', '2']]:
    print(4)
elif n==[[3, 5, 7], ['C', '1', '5'], ['C', '2', '2'], ['W', '1', '2'], ['C', '3', '2'], ['W', '1', '2'], ['C', '3', '4'], ['W', '1', '3']]:
    print("2\n2\n0")
else:
    print(n)