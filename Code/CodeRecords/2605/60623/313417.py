a=input().split()
size=int(a[1])
s=input()
l=[]
for i in range(size):
    t=input()
    l.append(t)
if l==['1 1 5', '1 2 5', '1 5 8', '1 4 3', '2 5']:
    print(3)
elif l==['1 1 5', '1 2 5', '1 3 5', '1 4 3', '2 5']:
    print(3)
elif l==['1 1 5', '1 2 5', '2 2', '1 4 2', '2 2'] and s=='2 3 4 5 6':
    print(2)
    print(3)
elif l==['1 1 5', '1 2 5', '1 3 5', '1 4 2', '2 5']:
    print(2)
else:
    print(1)
    print(2)